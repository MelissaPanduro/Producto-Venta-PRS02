<header class="bg-white shadow-md py-4">
  <div class="w-full px-4">
    <h1 class="text-3xl font-extrabold text-blue-900 dark:text-blue-400 md:text-4xl">
      <span class="bg-gradient-to-r from-sky-400 to-blue-600 bg-clip-text text-transparent">
        💠 Ubicaciones
      </span>
    </h1>
  </div>
</header>

<div class="container mx-auto my-6 p-4 bg-white shadow-md rounded-lg">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-bold">Lista de Ubicaciones</h2>
    <button (click)="abrirModal()" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2.5 px-4 rounded flex items-center text-base">
      <i class="fas fa-plus mr-2"></i> Agregar Ubicación
    </button>
  </div>

  <!-- Switcher de Estado -->
  <div class="flex items-center mb-4">
      <span class="mr-2 font-semibold">Mostrar:</span>
      <label class="relative inline-flex items-center cursor-pointer">
          <input type="checkbox" class="sr-only peer" [(ngModel)]="statusActive" (change)="toggleStatus()">
          <div class="w-11 h-6 rounded-full transition-colors duration-300 ease-in-out"
              [ngClass]="statusActive ? 'bg-green-500' : 'bg-red-500'">
              <div class="absolute top-[2px] left-[2px] h-5 w-5 bg-white border rounded-full transition-transform duration-300"
                  [ngClass]="statusActive ? 'translate-x-5' : 'translate-x-0'">
              </div>
          </div>
          <span class="ml-3 text-sm font-medium text-gray-900">
              {{ statusActive ? 'Activos' : 'Inactivos' }}
          </span>
      </label>
  </div>

  <div class="overflow-x-auto">
    <table class="min-w-full border-separate border-spacing-y-2 text-base">
      <thead>
        <tr>
          <th class="px-4 py-3 font-semibold text-blue-900 bg-blue-100">País</th>
          <th class="px-4 py-3 font-semibold text-blue-900 bg-blue-100">Departamento</th>
          <th class="px-4 py-3 font-semibold text-blue-900 bg-blue-100">Provincia</th>
          <th class="px-4 py-3 font-semibold text-blue-900 bg-blue-100">Distrito</th>
          <th class="px-4 py-3 font-semibold text-blue-900 bg-blue-100">Estado</th>
          <th class="px-4 py-3 font-semibold text-blue-900 bg-blue-100">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let ubicacion of paginatedUbicaciones" class="bg-gray-50 hover:bg-gray-100 text-center">
          <td class="px-4 py-3">{{ ubicacion.country }}</td>
          <td class="px-4 py-3">{{ ubicacion.department }}</td>
          <td class="px-4 py-3">{{ ubicacion.province }}</td>
          <td class="px-4 py-3">{{ ubicacion.district }}</td>
          <td class="px-4 py-3">
            <span 
              class="inline-flex w-5 h-5 rounded-full"
              [ngClass]="{'bg-green-500': ubicacion.status === 'A', 'bg-red-500': ubicacion.status === 'I'}">
            </span>
          </td>
          <td class="px-4 py-3 flex justify-center space-x-2">
            <!-- Botón de editar (Solo para ubicaciones activas) -->
            <button *ngIf="ubicacion.status === 'A'" class="text-blue-500 hover:text-blue-700 text-lg" (click)="editarUbicacion(ubicacion)">
              <i class="fas fa-edit"></i>
            </button>
            <!-- Botón de eliminar (Solo para ubicaciones activas) -->
            <button 
              *ngIf="ubicacion.status === 'A'" 
              class="text-red-500 hover:text-red-700 text-lg" 
              (click)="eliminarUbicacion(ubicacion.id)">
              <i class="fas fa-trash-alt"></i>
            </button>
          
            <!-- Botón de restaurar (Solo para ubicaciones inactivas) -->
            <button 
              *ngIf="ubicacion.status === 'I'" 
              class="text-green-500 hover:text-green-700 text-lg" 
              (click)="restaurarUbicacion(ubicacion.id)">
              <i class="fas fa-undo"></i>
            </button>
          </td>
          
        </tr>
      </tbody>
    </table>
  </div>

  <div class="flex justify-center mt-4 space-x-3 text-base">
    <button 
      class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded disabled:opacity-50"
      (click)="prevPage()"
      [disabled]="page === 1">
      Anterior
    </button>

    <span class="font-semibold text-gray-700">
      Página {{ page }} de {{ totalPages }}
    </span>

    <button 
      class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded disabled:opacity-50"
      (click)="nextPage()"
      [disabled]="page === totalPages">
      Siguiente
    </button>
  </div>
</div>



<!-- Modal -->
<div *ngIf="isModalOpen" class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50">
  <div class="bg-white rounded-lg shadow-lg w-96 p-6">
    <h2 class="text-xl font-bold mb-4">{{ editMode ? 'Editar Ubicación' : 'Agregar Ubicación' }}</h2>
    
    <form [formGroup]="ubigeoForm" (ngSubmit)="guardarUbicacion()">
      <div class="mb-4">
        <label class="block text-gray-700 font-bold mb-2">País</label>
        <input type="text" formControlName="country" class="w-full p-2 border rounded-lg">
      </div>
      <div class="mb-4">
        <label class="block text-gray-700 font-bold mb-2">Departamento</label>
        <input type="text" formControlName="department" class="w-full p-2 border rounded-lg">
      </div>
      <div class="mb-4">
        <label class="block text-gray-700 font-bold mb-2">Provincia</label>
        <input type="text" formControlName="province" class="w-full p-2 border rounded-lg">
      </div>
      <div class="mb-4">
        <label class="block text-gray-700 font-bold mb-2">Distrito</label>
        <input type="text" formControlName="district" class="w-full p-2 border rounded-lg">
      </div>
      
      <div class="flex justify-end space-x-2">
        <button type="button" (click)="cerrarModal()" class="bg-gray-400 text-white px-4 py-2 rounded">Cancelar</button>
        <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">Guardar</button>
      </div>
    </form>
  </div>
</div>